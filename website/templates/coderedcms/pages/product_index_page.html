{% extends "coderedcms/pages/base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content_body %}

{% load wagtailcore_tags %}
{% pageurl page.get_site.root_page as home_url %}
{% with home_page=page.get_site.root_page.specific %}

<!-- Hero Section -->
<div class="hero-wrap js-fullheight" style="background-image: url('{% if home_page.hero_background_image %}{{ home_page.hero_background_image.file.url }}{% endif %}'); height: 732px; background-position: 50% -25px;" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-center justify-content-center" data-scrollax-parent="true" style="height: 732px;">
            <div class="col-md-8 ftco-animate text-center" data-scrollax=" properties: { translateY: '70%' }" style="transform: translateZ(0px) translateY(0%);">
                <div class="icon">
                    <a href="{{ home_url }}" class="logo">
                        <span class="flaticon-flower"></span>
                        <h1>{{ home_page.hero_title }}</h1>
                    </a>
                </div>
                <h1 class="mb-4" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }" style="opacity: 1; transform: translateZ(0px) translateY(0%);">Beuty Salon</h1>
                <p class="mb-5" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }" style="opacity: 1; transform: translateZ(0px) translateY(0%);">{{ home_page.hero_subtitle }}</p>
                <p data-scrollax="properties: { translateY: '30%', opacity: 1.6 }" style="opacity: 1; transform: translateZ(0px) translateY(0%);">
                    <a href="https://wa.me/{{ home_page.appointment_phone_number }}" class="btn btn-white btn-outline-white px-4 py-3">Book an appointment now</a>
                </p>
            </div>
        </div>
    </div>
</div>

{% include "coderedcms/snippets/navigation.html" %}

{% endwith %}

<div class="container my-5">
    <h1 class="text-center mb-5">{{ page.title }}</h1>
    
    <div class="row">
        {% for product in products %}
        <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
            <div class="card h-100 shadow-sm">
                {% if product.images %}
                    {% with product.images.0 as first_image %}
                        {% if first_image.value %}
                            {% image first_image.value width-300 class="card-img-top" alt=product.title %}
                        {% endif %}
                    {% endwith %}
                {% else %}
                    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 300px;">
                        <span class="text-muted">No Image</span>
                    </div>
                {% endif %}
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ product.title }}</h5>
                    <div class="mt-auto">
                        <p class="card-text mb-2">
                            {% if product.discount_price %}
                                <span class="text-decoration-line-through text-muted small">{{ product.price }} TL</span><br>
                                <span class="text-danger fw-bold fs-5">{{ product.discount_price }} TL</span>
                            {% else %}
                                <span class="fw-bold fs-5">{{ product.price }} TL</span>
                            {% endif %}
                        </p>
                        {% if product.description_short %}
                            <p class="card-text small text-muted">{{ product.description_short|truncatewords:15|striptags }}</p>
                        {% endif %}
                        <a href="{% pageurl product %}" class="btn btn-primary btn-sm w-100 mt-2">View Details</a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center" role="alert">
                <h4>No products available yet.</h4>
                <p class="mb-0">Check back soon for new products!</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
